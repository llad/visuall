<!DOCTYPE html>
<html>
<head>
	<title>Bar</title>
	<script type="text/javascript" src="../paper.js/dist/paper.js"></script>
	<script type="text/paperscript" canvas="canvas">
		var periods = 12;
		var maxPercent = 100;
		var barWidth = 20;
		var margin = 50;
		var fundCount = 20;

		//Axis Setup
		var xaxis = new Path.Line([margin,0], [margin,maxPercent*2]);
		xaxis.strokeColor = 'black';

		var yaxis = new Path.Line([margin,maxPercent], [(periods*barWidth)+margin,maxPercent]);
		yaxis.strokeColor = 'black';

		function rnd_bmt() {
			var x = 0, y = 0, rds, c;

			// Get two random numbers from -1 to 1.
			// If the radius is zero or greater than 1, throw them out and pick two new ones
			// Rejection sampling throws away about 20% of the pairs.
			do {
			x = Math.random()*2-1;

			y = Math.random()*2-1;
			rds = x*x + y*y;
			}
			while (rds == 0 || rds > 1)

			// This magic is the Box-Muller Transform
			c = Math.sqrt(-2*Math.log(rds)/rds);

			// It always creates a pair of numbers. I'll return them in an array. 
			// This function is quite efficient so don't be afraid to throw one away if you don't need both.
			return [x*c, y*c];
		}


		function randBar (fundCount) {
			// Create a random bar for demo purposes
			var barOpacity = 1/fundCount;
			var nrand = rnd_bmt();
			var fofReturn = nrand[0]*maxPercent/10;

			for (var i = fundCount; i >= 0; i--) {
				var freturn = rnd_bmt()[0]*maxPercent/8;
				var subbar = new Path.Rectangle([50,fofReturn+maxPercent],[barWidth,freturn+maxPercent]);
				console.log("fofReturn:"+fofReturn);
				console.log("barWidth:"+barWidth);
				console.log("freturn:"+freturn);

				subbar.fillColor = '#ff0000';
				subbar.opacity = barOpacity;
			};

		}

		randBar(20);

	</script>
</head>
<body>
	<canvas id="canvas" resize></canvas>
</body>
</html>